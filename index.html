<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Resume Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --border: #dee2e6;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .app-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .form-section {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .preview-section {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        button:hover {
            background: var(--secondary);
        }
        
        .btn-generate {
            background: var(--accent);
            margin-top: 20px;
            width: 100%;
        }
        
        .btn-generate:hover {
            background: #c1121f;
        }
        
        .template-selector {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .template-option {
            border: 2px solid var(--border);
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            width: 140px;
            text-align: center;
        }
        
        .template-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .template-option.active {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.1);
        }
        
        .template-preview {
            height: 100px;
            background: linear-gradient(45deg, #e5e5e5, #f0f0f0);
            margin-bottom: 10px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }
        
        .resume-preview {
            flex-grow: 1;
            border: 1px solid var(--border);
            border-radius: 5px;
            padding: 20px;
            overflow-y: auto;
            background: white;
            min-height: 500px;
        }
        
        /* Modern Template Styles */
        .template-modern {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .template-modern .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary);
        }
        
        .template-modern .name {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .template-modern .contact {
            color: #666;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .template-modern .job-title {
            font-size: 18px;
            color: var(--secondary);
            font-weight: 600;
        }
        
        .template-modern .section {
            margin-bottom: 20px;
        }
        
        .template-modern .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--secondary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .template-modern ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .template-modern li {
            margin-bottom: 5px;
        }
        
        /* Classic Template Styles */
        .template-classic {
            font-family: Georgia, 'Times New Roman', Times, serif;
        }
        
        .template-classic .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ccc;
        }
        
        .template-classic .name {
            font-size: 26px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .template-classic .contact {
            color: #666;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .template-classic .job-title {
            font-size: 18px;
            color: #555;
            font-style: italic;
        }
        
        .template-classic .section {
            margin-bottom: 20px;
        }
        
        .template-classic .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .template-classic ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .template-classic li {
            margin-bottom: 5px;
        }
        
        /* Minimal Template Styles */
        .template-minimal {
            font-family: Arial, Helvetica, sans-serif;
        }
        
        .template-minimal .header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .template-minimal .name {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .template-minimal .contact {
            color: #666;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .template-minimal .job-title {
            font-size: 16px;
            color: #777;
        }
        
        .template-minimal .section {
            margin-bottom: 20px;
        }
        
        .template-minimal .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .template-minimal ul {
            padding-left: 18px;
            margin: 8px 0;
        }
        
        .template-minimal li {
            margin-bottom: 4px;
            font-size: 14px;
        }
        
        .hidden {
            display: none;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .upload-area {
            border: 2px dashed var(--border);
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .upload-icon {
            font-size: 40px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Print styles for PDF */
        @media print {
            body * {
                visibility: hidden;
            }
            .resume-preview, .resume-preview * {
                visibility: visible;
            }
            .resume-preview {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                padding: 15mm;
                box-shadow: none;
                border: none;
            }
        }
        
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .template-option {
                width: 120px;
            }
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* Critical fix for PDF generation */
        .pdf-mode .resume-preview {
            width: 210mm;
            min-height: 297mm;
            padding: 15mm;
            box-sizing: border-box;
            box-shadow: none;
            border: none;
            position: absolute;
            left: 0;
            top: 0;
            z-index: 9999;
            background: white;
        }
        
        .pdf-mode {
            overflow: hidden;
        }
        
        .pdf-visible {
            visibility: visible !important;
            opacity: 1 !important;
            color: #000 !important;
            background: transparent !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Free Resume Builder</h1>
            <p>Create professional resumes in minutes. Download as PDF for free!</p>
        </header>
        
        <div class="app-container">
            <div class="form-section">
                <h2>Build Your Resume</h2>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">📄</div>
                    <p>Upload your existing resume (PDF, DOCX) - <em>Coming Soon</em></p>
                    <input type="file" id="fileUpload" class="hidden" accept=".pdf,.doc,.docx">
                </div>
                
                <div class="template-selector">
                    <div class="template-option active" data-template="modern">
                        <div class="template-preview">Modern</div>
                        <div>Modern</div>
                    </div>
                    <div class="template-option" data-template="classic">
                        <div class="template-preview">Classic</div>
                        <div>Classic</div>
                    </div>
                    <div class="template-option" data-template="minimal">
                        <div class="template-preview">Minimal</div>
                        <div>Minimal</div>
                    </div>
                </div>
                
                <form id="resumeForm">
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" placeholder="John Doe" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="jobTitle">Professional Title</label>
                        <input type="text" id="jobTitle" placeholder="Software Developer">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="john.doe@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input type="tel" id="phone" placeholder="+1 (123) 456-7890">
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" placeholder="New York, NY">
                    </div>
                    
                    <div class="form-group">
                        <label for="summary">Professional Summary</label>
                        <textarea id="summary" rows="3" placeholder="Experienced professional with..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="experience">Work Experience</label>
                        <textarea id="experience" rows="4" placeholder="Company A - Position (2020-2022)
- Achieved X by doing Y
- Improved process efficiency by 25%

Company B - Position (2018-2020)
- Managed a team of 10 people
- Implemented new system that reduced costs"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="education">Education</label>
                        <textarea id="education" rows="3" placeholder="University Name - Degree (2014-2018)
- Relevant coursework or achievements

College Name - Diploma (2012-2014)"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="skills">Skills</label>
                        <textarea id="skills" rows="2" placeholder="JavaScript, React, Node.js, Python, Project Management"></textarea>
                    </div>
                    
                    <button type="button" class="btn-generate" id="generatePdf">
                        <span>Generate & Download PDF</span>
                    </button>
                </form>
            </div>
            
            <div class="preview-section">
                <h2>Resume Preview</h2>
                <div class="resume-preview" id="resumePreview">
                    <!-- Preview will be generated here -->
                    <div class="template-modern">
                        <div class="header">
                            <div class="name">Your Name</div>
                            <div class="contact">your.email@example.com | +1 (123) 456-7890 | Your Location</div>
                            <div class="job-title">Professional Title</div>
                        </div>
                        
                        <div class="section">
                            <div class="section-title">PROFESSIONAL SUMMARY</div>
                            <div>Your professional summary will appear here.</div>
                        </div>
                        
                        <div class="section">
                            <div class="section-title">EXPERIENCE</div>
                            <div>Your work experience will appear here.</div>
                        </div>
                        
                        <div class="section">
                            <div class="section-title">EDUCATION</div>
                            <div>Your education details will appear here.</div>
                        </div>
                        
                        <div class="section">
                            <div class="section-title">SKILLS</div>
                            <div>Your skills will appear here.</div>
                        </div>
                    </div>
                </div>
                
                <div class="actions">
                    <button id="saveData">Save Data</button>
                    <button id="resetForm">Reset Form</button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>This free resume builder is hosted on GitHub Pages. Your data remains private and is not stored on any server.</p>
            <p>© 2023 Free Resume Builder. All rights reserved.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const resumeForm = document.getElementById('resumeForm');
            const generatePdfBtn = document.getElementById('generatePdf');
            const saveDataBtn = document.getElementById('saveData');
            const resetFormBtn = document.getElementById('resetForm');
            const resumePreview = document.getElementById('resumePreview');
            const templateOptions = document.querySelectorAll('.template-option');
            const body = document.body;
            
            // Current template
            let currentTemplate = 'modern';
            
            // Template selection
            templateOptions.forEach(option => {
                option.addEventListener('click', function() {
                    templateOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentTemplate = this.getAttribute('data-template');
                    updateResumePreview();
                });
            });
            
            // Update preview when form changes
            resumeForm.addEventListener('input', updateResumePreview);
            
            // Generate PDF
            generatePdfBtn.addEventListener('click', function() {
                // Add loading state
                document.body.classList.add('loading');
                const originalText = generatePdfBtn.textContent;
                generatePdfBtn.textContent = 'Generating PDF...';
                
                // Use setTimeout to allow UI to update before heavy PDF processing
                setTimeout(function() {
                    try {
                        // Enable PDF mode
                        body.classList.add('pdf-mode');
                        
                        // Update preview to ensure it's current
                        updateResumePreview();
                        
                        const formData = getFormData();
                        const options = {
                            margin: [10, 10, 10, 10],
                            filename: formData.fullName.replace(/\s+/g, '_') + '_resume.pdf',
                            image: { type: 'jpeg', quality: 0.98 },
                            html2canvas: { 
                                scale: 2,
                                useCORS: true,
                                logging: false,
                                backgroundColor: '#FFFFFF',
                                scrollX: 0,
                                scrollY: 0,
                                width: 810, // 210mm * 96dpi / 25.4mm/inch ≈ 795px, using 810 for margin
                                windowWidth: 810
                            },
                            jsPDF: { 
                                unit: 'mm', 
                                format: 'a4', 
                                orientation: 'portrait' 
                            }
                        };
                        
                        // Generate PDF directly from the preview
                        html2pdf()
                            .set(options)
                            .from(resumePreview)
                            .save()
                            .then(() => {
                                // Reset button and remove PDF mode
                                generatePdfBtn.textContent = originalText;
                                document.body.classList.remove('loading');
                                body.classList.remove('pdf-mode');
                            })
                            .catch(error => {
                                console.error('PDF generation error:', error);
                                
                                // Reset button and remove PDF mode
                                generatePdfBtn.textContent = originalText;
                                document.body.classList.remove('loading');
                                body.classList.remove('pdf-mode');
                                
                                alert('Error generating PDF. Please try again.');
                            });
                    } catch (error) {
                        console.error('Error in PDF generation:', error);
                        generatePdfBtn.textContent = originalText;
                        document.body.classList.remove('loading');
                        body.classList.remove('pdf-mode');
                        alert('Error generating PDF. Please try again.');
                    }
                }, 100);
            });
            
            // Save data to local storage
            saveDataBtn.addEventListener('click', function() {
                const formData = {};
                document.querySelectorAll('#resumeForm input, #resumeForm textarea').forEach(input => {
                    formData[input.id] = input.value;
                });
                
                // Save template preference too
                formData.template = currentTemplate;
                
                localStorage.setItem('resumeData', JSON.stringify(formData));
                alert('Resume data saved successfully!');
            });
            
            // Reset form
            resetFormBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to reset the form? All data will be lost.')) {
                    resumeForm.reset();
                    localStorage.removeItem('resumeData');
                    
                    // Reset template to modern
                    templateOptions.forEach(opt => opt.classList.remove('active'));
                    document.querySelector('[data-template="modern"]').classList.add('active');
                    currentTemplate = 'modern';
                    
                    updateResumePreview();
                }
            });
            
            // Load saved data if exists
            const savedData = localStorage.getItem('resumeData');
            if (savedData) {
                try {
                    const formData = JSON.parse(savedData);
                    for (const id in formData) {
                        if (document.getElementById(id)) {
                            document.getElementById(id).value = formData[id] || '';
                        }
                    }
                    
                    // Load template preference
                    if (formData.template) {
                        templateOptions.forEach(opt => opt.classList.remove('active'));
                        document.querySelector(`[data-template="${formData.template}"]`).classList.add('active');
                        currentTemplate = formData.template;
                    }
                    
                    updateResumePreview();
                } catch (e) {
                    console.error('Error loading saved data:', e);
                    localStorage.removeItem('resumeData');
                }
            }
            
            // Get form data
            function getFormData() {
                return {
                    fullName: document.getElementById('fullName').value || 'Your Name',
                    jobTitle: document.getElementById('jobTitle').value || 'Professional Title',
                    email: document.getElementById('email').value || 'your.email@example.com',
                    phone: document.getElementById('phone').value || '+1 (123) 456-7890',
                    location: document.getElementById('location').value || 'Your Location',
                    summary: document.getElementById('summary').value || 'Your professional summary will appear here.',
                    experience: document.getElementById('experience').value || 'Your work experience will appear here.',
                    education: document.getElementById('education').value || 'Your education details will appear here.',
                    skills: document.getElementById('skills').value || 'Your skills will appear here.'
                };
            }
            
            // Update resume preview
            function updateResumePreview() {
                const formData = getFormData();
                
                let experienceHtml = '';
                if (formData.experience && formData.experience !== 'Your work experience will appear here.') {
                    const entries = formData.experience.split('\n\n');
                    experienceHtml = entries.map(entry => {
                        const lines = entry.split('\n');
                        let html = `<div><strong>${lines[0]}</strong></div>`;
                        if (lines.length > 1) {
                            html += '<ul>';
                            for (let i = 1; i < lines.length; i++) {
                                if (lines[i].trim()) {
                                    html += `<li>${lines[i].replace(/^[-*]\s/, '')}</li>`;
                                }
                            }
                            html += '</ul>';
                        }
                        return html;
                    }).join('');
                } else {
                    experienceHtml = '<div>Your work experience will appear here.</div>';
                }
                
                let educationHtml = '';
                if (formData.education && formData.education !== 'Your education details will appear here.') {
                    const entries = formData.education.split('\n\n');
                    educationHtml = entries.map(entry => {
                        const lines = entry.split('\n');
                        let html = `<div><strong>${lines[0]}</strong></div>`;
                        if (lines.length > 1) {
                            html += '<ul>';
                            for (let i = 1; i < lines.length; i++) {
                                if (lines[i].trim()) {
                                    html += `<li>${lines[i].replace(/^[-*]\s/, '')}</li>`;
                                }
                            }
                            html += '</ul>';
                        }
                        return html;
                    }).join('');
                } else {
                    educationHtml = '<div>Your education details will appear here.</div>';
                }
                
                // Skills formatting
                let skillsHtml = formData.skills;
                if (formData.skills && formData.skills !== 'Your skills will appear here.') {
                    skillsHtml = formData.skills.split(',').map(skill => skill.trim()).join(', ');
                }
                
                const templateHtml = `
                    <div class="template-${currentTemplate}">
                        <div class="header">
                            <div class="name">${formData.fullName}</div>
                            <div class="contact">${formData.email} | ${formData.phone} | ${formData.location}</div>
                            ${formData.jobTitle ? `<div class="job-title">${formData.jobTitle}</div>` : ''}
                        </div>
                        
                        <div class="section">
                            <div class="section-title">PROFESSIONAL SUMMARY</div>
                            <div>${formData.summary}</div>
                        </div>
                        
                        <div class="section">
                            <div class="section-title">EXPERIENCE</div>
                            ${experienceHtml}
                        </div>
                        
                        <div class="section">
                            <div class="section-title">EDUCATION</div>
                            ${educationHtml}
                        </div>
                        
                        <div class="section">
                            <div class="section-title">SKILLS</div>
                            <div>${skillsHtml}</div>
                        </div>
                    </div>
                `;
                
                resumePreview.innerHTML = templateHtml;
            }
            
            // Initialize preview
            updateResumePreview();
        });
    </script>
</body>
</html>